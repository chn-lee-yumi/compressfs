# compressfs

- 一个简陋的压缩文件系统，基于bazil.org/fuse。说是简陋，因为除了性能不是很好之外（大文件读写极慢），只实现了读写删三个功能。不支持目录，不支持修改权限。
- 写这个的目的是为了验证自己的想法能否实现。据我所知，目前Linux文件系统里面只有btrfs支持压缩（我没了解过具体实现机制）。所以我决定采用Go语言来写一个FUSE。
- 实验是成功的，但是速度很慢，因为我没有做任何优化。每一次的读写请求都会解压缩整个文件。当然优化方案已经想好，写在源码注释里了，以后有时间看心情再实现。

## 使用方法

- 安装依赖`bazil.org/fuse`
- 下载源码，build。
- 新建一个文件夹，例如testdir。这个文件夹用于存放压缩后的文件。
- 新建一个文件夹，用于挂载compressfs。也可以直接挂载到/mnt。
- ./compressfs ./testdir /mnt
- 挂载成功后，可以往/mnt里拷贝几个文件，然后可以在testdir里面看到压缩后到文件，用`ls -l`命令可以对比文件大小。
- 你可以拷个可执行文件到/mnt，然后运行，发现是可以正常运行的。
